{
  "version": 1,
  "generated_at": "2025-12-25",
  "notes": "Scripts com engine embutido. ExecuÃ§Ã£o direta no portal. JSON vÃ¡lido.",
  "scripts": {
    "GEAP": {
      "AMBOS": "(function(){const CONFIG={plan:'GEAP',debug:true,breakpoint:false,waitTimeout:30000,charDelay:40,stepDelay:600,backendDelay:5000,maxRetry:3};const log=(...m)=>CONFIG.debug&&console.log('ðŸŽ­ ['+CONFIG.plan+']',...m);const sleep=ms=>new Promise(r=>setTimeout(r,ms));async function waitFor(sel,t=CONFIG.waitTimeout){const s=Date.now();while(Date.now()-s<t){const e=document.querySelector(sel);if(e)return e;await sleep(300);}throw new Error('Timeout '+sel);}async function typeHuman(el,text){el.focus();el.value='';for(const ch of text){el.value+=ch;el.dispatchEvent(new Event('input',{bubbles:true}));await sleep(CONFIG.charDelay);}el.dispatchEvent(new Event('change',{bubbles:true}));el.dispatchEvent(new Event('blur',{bubbles:true}));}async function run(){const CODES=[\"40301087\",\"40301150\",\"40301222\",\"40301281\",\"40316211\"];log('â³ aguardando formulÃ¡rio');await waitFor('#item_medico_1');log('âœ… formulÃ¡rio pronto');for(let i=0;i<CODES.length;i++){const idx=i+1,code=CODES[i];if(idx>1)document.getElementById('button2')?.click();await sleep(CONFIG.stepDelay);const campo=document.getElementById(`item_medico_${idx}`);if(!campo)throw new Error('Campo '+idx+' nÃ£o encontrado');await typeHuman(campo,code);const qtd=document.getElementsByName(`qtd_solicitada_${idx}`)[0];if(qtd){qtd.value='1';qtd.dispatchEvent(new Event('change',{bubbles:true}));}await sleep(CONFIG.backendDelay);}log('ðŸŽ‰ finalizado');} (async()=>{for(let t=1;t<=CONFIG.maxRetry;t++){try{if(CONFIG.breakpoint)debugger;await run();return;}catch(e){console.error('âŒ erro tentativa',t,e);if(t===CONFIG.maxRetry)throw e;await sleep(2000);}}})();})();"
    },

    "CASEMBRAPA": {
      "AMBOS": "(function(){const CONFIG={plan:'CASEMBRAPA',debug:true,waitTimeout:30000,charDelay:40,stepDelay:600,backendDelay:3000,maxRetry:3};const log=(...m)=>CONFIG.debug&&console.log('ðŸŽ­ ['+CONFIG.plan+']',...m);const sleep=ms=>new Promise(r=>setTimeout(r,ms));async function waitFor(sel,t=CONFIG.waitTimeout){const s=Date.now();while(Date.now()-s<t){const e=document.querySelector(sel);if(e)return e;await sleep(300);}throw new Error('Timeout '+sel);}async function run(){const CODES=[\"40301087\",\"40301150\",\"40301222\"];log('â³ aguardando grid');const grid=await waitFor('#gridSolicitacao_gridProcedimentosSimples');for(const code of CODES){grid.querySelector('#insertButton')?.click();await sleep(600);const proc=await waitFor(\"input[name='PROCEDIMENTO']\");proc.value=code;proc.dispatchEvent(new Event('input',{bubbles:true}));proc.dispatchEvent(new KeyboardEvent('keydown',{key:'Enter',keyCode:13,bubbles:true}));log('âœ” inserido',code);await sleep(CONFIG.backendDelay);}log('ðŸŽ‰ finalizado');} (async()=>{for(let t=1;t<=CONFIG.maxRetry;t++){try{await run();return;}catch(e){console.error('âŒ erro',t,e);if(t===CONFIG.maxRetry)throw e;await sleep(2000);}}})();})();"
    },

    "NOVASAude": {
      "AMBOS": "@GEAP"
    },

    "GAMASAUDE": {
      "AMBOS": "@GEAP"
    },

    "TRT": {
      "AMBOS": "(function(){const CONFIG={plan:'TRT',debug:true,waitTimeout:30000,backendDelay:4000,maxRetry:3};const log=(...m)=>CONFIG.debug&&console.log('ðŸŽ­ ['+CONFIG.plan+']',...m);const sleep=ms=>new Promise(r=>setTimeout(r,ms));async function waitFor(sel,t=CONFIG.waitTimeout){const s=Date.now();while(Date.now()-s<t){const e=document.querySelector(sel);if(e)return e;await sleep(300);}throw new Error('Timeout '+sel);}async function run(){const CODES=[\"40301087\",\"40301150\",\"40301222\"];for(const code of CODES){const input=await waitFor('#termoCodigoSolicitado');input.value=code;input.dispatchEvent(new Event('input',{bubbles:true}));input.dispatchEvent(new Event('change',{bubbles:true}));await sleep(1000);document.querySelector('button')?.click();log('âœ” inserido',code);await sleep(CONFIG.backendDelay);}log('ðŸŽ‰ finalizado');} (async()=>{for(let t=1;t<=CONFIG.maxRetry;t++){try{await run();return;}catch(e){console.error('âŒ erro',t,e);if(t===CONFIG.maxRetry)throw e;await sleep(2000);}}})();})();"
    },

    "TJDFT": {
      "PROCEDIMENTOS": "(function(){const CONFIG={plan:'TJDFT',debug:true,waitTimeout:30000,charDelay:40,backendDelay:3000,maxRetry:3};const log=(...m)=>CONFIG.debug&&console.log('ðŸŽ­ ['+CONFIG.plan+']',...m);const sleep=ms=>new Promise(r=>setTimeout(r,ms));async function waitFor(sel,t=CONFIG.waitTimeout){const s=Date.now();while(Date.now()-s<t){const e=document.querySelector(sel);if(e)return e;await sleep(300);}throw new Error('Timeout '+sel);}async function run(){const CODES=[\"40301087\",\"40301150\",\"40301222\"];for(const code of CODES){const field=await waitFor('#HandleTermo');field.value='';for(const ch of code){field.value+=ch;field.dispatchEvent(new Event('input',{bubbles:true}));await sleep(CONFIG.charDelay);}field.dispatchEvent(new KeyboardEvent('keypress',{key:'Enter',keyCode:13,bubbles:true}));log('âœ” inserido',code);await sleep(CONFIG.backendDelay);}log('ðŸŽ‰ finalizado');} (async()=>{for(let t=1;t<=CONFIG.maxRetry;t++){try{await run();return;}catch(e){console.error('âŒ erro',t,e);if(t===CONFIG.maxRetry)throw e;await sleep(2000);}}})();})();"
    }
  }
}
