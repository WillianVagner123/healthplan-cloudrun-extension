{
  "version": 1,
  "generated_at": "2025-12-25",
  "scripts_by_plan": {
    "GEAP": {
      "AMBOS": {
        "code": "(async () => {\n  try {\n    const PLAN = 'GEAP';\n    const CODES = [\n      \"40301087\",\"40301150\",\"40301222\",\"40301281\",\"40316211\",\n      \"40316157\",\"40301354\",\"40301362\",\"40301397\",\"40301419\",\n      \"40301648\",\"40704076\",\"40301630\",\"40316246\",\"40316262\",\n      \"40316270\",\"40301842\",\"40301427\",\"40302520\",\"40301931\",\n      \"40316289\",\"40316300\",\"40302075\",\"40304361\",\"40302113\",\n      \"40316360\",\"40301729\",\"40316335\",\"40302199\",\"40302237\",\n      \"40302750\",\"40316408\",\"40316416\",\"40308391\",\"40302385\",\n      \"40305627\",\"40316467\",\"40316556\",\"40316521\",\"40316548\",\n      \"40316491\",\"40316483\",\"40316513\",\"40316505\",\"40312151\",\n      \"40302580\",\"40316530\",\"40316572\",\"40302830\",\"40301958\",\n      \"40316165\",\"40302687\",\"40302601\",\"40302610\",\"40302849\",\n      \"40305465\",\"40302318\",\"40304507\",\"40302377\",\"40314103\",\n      \"40313301\"\n    ];\n\n    const sleep = ms => new Promise(r => setTimeout(r, ms));\n\n    async function waitForItem1(timeout = 30000) {\n      const start = Date.now();\n      while (Date.now() - start < timeout) {\n        const el = document.getElementById('item_medico_1');\n        if (el) return el;\n        await sleep(300);\n      }\n      throw new Error('Timeout aguardando item_medico_1');\n    }\n\n    async function typeHumanGEAP(el, text) {\n      el.focus();\n      el.value = '';\n\n      for (const ch of text) {\n        el.value += ch;\n        el.dispatchEvent(new Event('input', { bubbles: true }));\n        await sleep(40);\n      }\n\n      // ðŸ”‘ ENTER humano (evita onchange direto e o debugger da GEAP)\n      el.dispatchEvent(new KeyboardEvent('keydown', {\n        bubbles: true,\n        key: 'Enter',\n        code: 'Enter',\n        keyCode: 13,\n        which: 13\n      }));\n\n      el.dispatchEvent(new KeyboardEvent('keyup', {\n        bubbles: true,\n        key: 'Enter',\n        code: 'Enter',\n        keyCode: 13,\n        which: 13\n      }));\n    }\n\n    console.log(`ðŸŽ­ [${PLAN}] â³ aguardando formulÃ¡rio...`);\n    await waitForItem1();\n    console.log(`ðŸŽ­ [${PLAN}] âœ… formulÃ¡rio pronto`);\n\n    for (let i = 0; i < CODES.length; i++) {\n      const idx = i + 1;\n      const code = CODES[i];\n\n      if (idx > 1) {\n        const btnAdd = document.getElementById('button2');\n        if (btnAdd) {\n          btnAdd.click();\n          await sleep(600);\n        }\n      }\n\n      const campo = document.getElementById(`item_medico_${idx}`);\n      if (!campo) throw new Error(`Campo item_medico_${idx} nÃ£o encontrado`);\n\n      await typeHumanGEAP(campo, code);\n      console.log(`ðŸŽ­ [${PLAN}] âœ” cÃ³digo inserido: ${code}`);\n\n      const qtd = document.getElementById(`qtd_solicitada_${idx}`);\n      if (qtd) {\n        qtd.focus();\n        qtd.value = '1';\n        qtd.dispatchEvent(new Event('input', { bubbles: true }));\n        qtd.dispatchEvent(new Event('change', { bubbles: true }));\n      }\n\n      // Modal de biometria (se aparecer)\n      await sleep(800);\n      const modal = document.getElementById('modalDadosBiometria');\n      if (modal && modal.classList.contains('in')) {\n        console.log(`ðŸŽ­ [${PLAN}] â„¹ï¸ modal biometria detectado`);\n        document.getElementById('validacaoCelularEmail')?.click();\n        document.getElementById('btnModalDadosBiometria')?.click();\n        await sleep(1500);\n      }\n\n      // tempo do backend GEAP\n      await sleep(5000);\n    }\n\n    console.log(`ðŸŽ­ [${PLAN}] ðŸŽ‰ todos os procedimentos inseridos com sucesso`);\n\n  } catch (e) {\n    console.error('âŒ [GEAP] erro fatal:', e);\n  }\n})();"
      }
    }
  



    "CASEMBRAPA": {
      "AMBOS": "(function(){const CONFIG={plan:'CASEMBRAPA',debug:true,waitTimeout:30000,charDelay:40,stepDelay:600,backendDelay:3000,maxRetry:3};const log=(...m)=>CONFIG.debug&&console.log('ðŸŽ­ ['+CONFIG.plan+']',...m);const sleep=ms=>new Promise(r=>setTimeout(r,ms));async function waitFor(sel,t=CONFIG.waitTimeout){const s=Date.now();while(Date.now()-s<t){const e=document.querySelector(sel);if(e)return e;await sleep(300);}throw new Error('Timeout '+sel);}async function run(){const CODES=[\"40301087\",\"40301150\",\"40301222\"];log('â³ aguardando grid');const grid=await waitFor('#gridSolicitacao_gridProcedimentosSimples');for(const code of CODES){grid.querySelector('#insertButton')?.click();await sleep(600);const proc=await waitFor(\"input[name='PROCEDIMENTO']\");proc.value=code;proc.dispatchEvent(new Event('input',{bubbles:true}));proc.dispatchEvent(new KeyboardEvent('keydown',{key:'Enter',keyCode:13,bubbles:true}));log('âœ” inserido',code);await sleep(CONFIG.backendDelay);}log('ðŸŽ‰ finalizado');} (async()=>{for(let t=1;t<=CONFIG.maxRetry;t++){try{await run();return;}catch(e){console.error('âŒ erro',t,e);if(t===CONFIG.maxRetry)throw e;await sleep(2000);}}})();})();"
    },

    "NOVASAude": {
      "AMBOS": "@GEAP"
    },

    "GAMASAUDE": {
      "AMBOS": "@GEAP"
    },

    "TRT": {
      "AMBOS": "(function(){const CONFIG={plan:'TRT',debug:true,waitTimeout:30000,backendDelay:4000,maxRetry:3};const log=(...m)=>CONFIG.debug&&console.log('ðŸŽ­ ['+CONFIG.plan+']',...m);const sleep=ms=>new Promise(r=>setTimeout(r,ms));async function waitFor(sel,t=CONFIG.waitTimeout){const s=Date.now();while(Date.now()-s<t){const e=document.querySelector(sel);if(e)return e;await sleep(300);}throw new Error('Timeout '+sel);}async function run(){const CODES=[\"40301087\",\"40301150\",\"40301222\"];for(const code of CODES){const input=await waitFor('#termoCodigoSolicitado');input.value=code;input.dispatchEvent(new Event('input',{bubbles:true}));input.dispatchEvent(new Event('change',{bubbles:true}));await sleep(1000);document.querySelector('button')?.click();log('âœ” inserido',code);await sleep(CONFIG.backendDelay);}log('ðŸŽ‰ finalizado');} (async()=>{for(let t=1;t<=CONFIG.maxRetry;t++){try{await run();return;}catch(e){console.error('âŒ erro',t,e);if(t===CONFIG.maxRetry)throw e;await sleep(2000);}}})();})();"
    },

    "TJDFT": {
      "PROCEDIMENTOS": "(function(){const CONFIG={plan:'TJDFT',debug:true,waitTimeout:30000,charDelay:40,backendDelay:3000,maxRetry:3};const log=(...m)=>CONFIG.debug&&console.log('ðŸŽ­ ['+CONFIG.plan+']',...m);const sleep=ms=>new Promise(r=>setTimeout(r,ms));async function waitFor(sel,t=CONFIG.waitTimeout){const s=Date.now();while(Date.now()-s<t){const e=document.querySelector(sel);if(e)return e;await sleep(300);}throw new Error('Timeout '+sel);}async function run(){const CODES=[\"40301087\",\"40301150\",\"40301222\"];for(const code of CODES){const field=await waitFor('#HandleTermo');field.value='';for(const ch of code){field.value+=ch;field.dispatchEvent(new Event('input',{bubbles:true}));await sleep(CONFIG.charDelay);}field.dispatchEvent(new KeyboardEvent('keypress',{key:'Enter',keyCode:13,bubbles:true}));log('âœ” inserido',code);await sleep(CONFIG.backendDelay);}log('ðŸŽ‰ finalizado');} (async()=>{for(let t=1;t<=CONFIG.maxRetry;t++){try{await run();return;}catch(e){console.error('âŒ erro',t,e);if(t===CONFIG.maxRetry)throw e;await sleep(2000);}}})();})();"
    }
  }
}
